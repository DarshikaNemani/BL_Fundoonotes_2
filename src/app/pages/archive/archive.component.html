<div class="archive-container">
  <div class="archive-content">
    <!-- Archive notes grid -->
    <div class="notes-container" *ngIf="archivedNotes.length > 0">
      <div class="notes-masonry">
        <div *ngFor="let note of archivedNotes; trackBy: trackByNoteId" 
             class="note-card" 
             [class.editing]="isEditing && editNoteId === note.id"
             (click)="onNoteClick(note)">
          
          <!-- Display mode -->
          <div *ngIf="!(isEditing && editNoteId === note.id)" class="note-content">
            <div class="note-body">
              <div class="note-title" *ngIf="note.title">{{ note.title }}</div>
              <div class="note-description" *ngIf="note.description">{{ note.description }}</div>
            </div>
            
            <div class="note-actions-bottom">
              <button mat-icon-button class="action-btn" aria-label="Unarchive" (click)="onUnarchiveNote(note.id); $event.stopPropagation()">
                <mat-icon>unarchive</mat-icon>
              </button>
              <button mat-icon-button class="action-btn" aria-label="Delete" (click)="onDeleteNote(note.id); $event.stopPropagation()">
                <mat-icon>delete</mat-icon>
              </button>
              <button mat-icon-button class="action-btn" aria-label="Color options" (click)="$event.stopPropagation()">
                <mat-icon>palette</mat-icon>
              </button>
              <button mat-icon-button class="action-btn" aria-label="More" (click)="$event.stopPropagation()">
                <mat-icon>more_vert</mat-icon>
              </button>
            </div>
          </div>
          
          <!-- Edit mode -->
          <div *ngIf="isEditing && editNoteId === note.id" class="edit-content" (click)="$event.stopPropagation()">
            <div class="edit-body">
              <input 
                [(ngModel)]="editTitle" 
                placeholder="Title" 
                class="edit-title-input"
                type="text"
                (keydown.enter)="onSaveNote(note.id)"
                (keydown.escape)="onCancelEdit()">
              
              <textarea 
                [(ngModel)]="editDescription" 
                placeholder="Take a note..." 
                class="edit-description-textarea"
                rows="4"
                (keydown.escape)="onCancelEdit()"></textarea>
            </div>
            
            <div class="edit-actions-bottom">
              <div class="edit-action-buttons">
                <button type="button" mat-icon-button aria-label="Unarchive">
                  <mat-icon>unarchive</mat-icon>
                </button>
                <button type="button" mat-icon-button aria-label="Delete">
                  <mat-icon>delete</mat-icon>
                </button>
                <button type="button" mat-icon-button aria-label="Color options">
                  <mat-icon>palette</mat-icon>
                </button>
                <button type="button" mat-icon-button aria-label="More">
                  <mat-icon>more_vert</mat-icon>
                </button>
              </div>
              <button mat-button (click)="onSaveNote(note.id)" class="close-btn">
                Close
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Empty state -->
    <div class="empty-state" *ngIf="archivedNotes.length === 0 && !isLoading">
      <mat-icon class="empty-icon">archive</mat-icon>
      <p class="empty-message">Your archived notes appear here</p>
    </div>

    <!-- Loading state -->
    <div class="loading-state" *ngIf="isLoading">
      <mat-spinner diameter="40"></mat-spinner>
    </div>
  </div>
</div>
